<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- Font Awesome CSS-->
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <!-- Google fonts - Open Sans-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:500" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
	<link rel="stylesheet" href="ajax-login-style.css">
	<style>
	
	</style>
  </head>
  <body>
  
	<div class="container">
		
		<form class="form-group" action="#" name="form" method="post">
			<h2>Login</h2>
				<div class="">
					<label for="name"></label>
					<input type="text" class="form-control" id="username" placeholder="Username*:" >
					<div class="alert-username" role="alert"></div>
				</div>
				<div class="">
					<label for="psw"></label>
					<input type="password" class="form-control" id="psw" placeholder="Password*:">
					<div class="alert-psw" role="alert"></div>
				</div>
			<label for="comment"></label>
			<textarea class="form-control" rows="4" id="comment" class="md-textarea">Your Comment</textarea>
		</form>
		<div class="notify row clearfix">
			<div class="notify-check col-md-9">
				<img src="images/retangle.png">
				<span>notify me of follow up comment via e-mail</span>
			</div>
			<div class="btn-send col-md-3">
				<button class="btn btn-info" role="button" type="submit">Send</button>
			</div>
		</div>
		<div class="alert" role="alert"></div>
	</div>
	<script>
		var username = document.getElementById("username");
		var psw = document.getElementById("psw");
		var btn = document.querySelector("button");
		var alert = document.querySelector(".alert");
		var alertUsername = document.querySelector(".alert-username");
		var alertPsw = document.querySelector(".alert-psw");
		
		function validateForm(){
			var usernameNull = username.value == "" || username.value == null;
			var pswNull = psw.value == "" || psw.value == null;
			if (usernameNull == false && pswNull == false){
				
				var userData;
				var request = new XMLHttpRequest();
				request.open('GET', "https://training.gemvietnam.com/dummy-api/users.json");
				request.responseType = 'text';

				request.onload = function() {
				  userData =  JSON.parse(request.response);
					function testUser(){
						for (var i in userData){
							if( username.value === userData[i].username && psw.value === userData[i].password){
								alert.innerHTML = "Great! Your account is validate";
								alert.classList.remove("alert-danger");
								alert.classList.add("alert-success");
								break;
							}
							else{
								alert.innerHTML = "Oops! Name or password is wrong!";
								alert.classList.add("alert-danger");
								alert.classList.remove("alert-success");
							}
						}
					}
					testUser();
				};
				request.send();
			}
			else{
				
				if (usernameNull == true){
					username.classList.add("is-invalid");
					alertUsername.innerHTML = "Username can't be empty!";
					alertUsername.classList.add("alert-danger");
				}
				if(pswNull ==  true){
					psw.classList.add("is-invalid");
					alertPsw.innerHTML = "Password can't be empty!";
					alertPsw.classList.add("alert-danger");
				}
			}
			username.onkeyup = function(){
			username.classList.remove("is-invalid");
			alertUsername.innerHTML = "";
			alertUsername.classList.remove("alert-danger");
			}
			psw.onkeyup = function(){
				psw.classList.remove("is-invalid");
				alertPsw.innerHTML = "";
				alertPsw.classList.remove("alert-danger");
			}
		}
		btn.addEventListener("click", validateForm);
		
		
	</script>
  </body>
</html>